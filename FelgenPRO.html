<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FelgenPRO – Aufbau, Maße & Praxis</title>
  <meta name="description" content="Felgen: Aufbau, Maße (ET/PCD/Nabe), Arten, Montage & Hinweise – im Index/Liquid-Glass Design.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

  <style>
    /* ========= Light Mode Lesbarkeit (fix) ========= */
    [data-theme="light"] body { color: rgba(15,23,42,0.92); }
    [data-theme="light"] .liquid-glass{
      background: rgba(255,255,255,0.70) !important;
      border-color: rgba(15,23,42,0.10) !important;
      box-shadow: 0 10px 30px rgba(2,6,23,0.10) !important;
      color: rgba(15,23,42,0.92) !important;
    }
    [data-theme="light"] .text-white{ color: rgba(15,23,42,0.92) !important; }
    [data-theme="light"] .text-white\/85{ color: rgba(15,23,42,0.85) !important; }
    [data-theme="light"] .text-white\/75{ color: rgba(15,23,42,0.78) !important; }
    [data-theme="light"] .text-white\/70{ color: rgba(15,23,42,0.70) !important; }
    [data-theme="light"] .text-white\/60{ color: rgba(15,23,42,0.60) !important; }

    [data-theme="light"] .bg-white\/5{ background: rgba(2,6,23,0.04) !important; }
    [data-theme="light"] .border-white\/10{ border-color: rgba(15,23,42,0.14) !important; }
    [data-theme="light"] .focus\:border-white\/20:focus{ border-color: rgba(15,23,42,0.22) !important; }
    [data-theme="light"] .focus\:ring-white\/10:focus{ --tw-ring-color: rgba(2,6,23,0.10) !important; }

    [data-theme="light"] .lg-badge,
    [data-theme="light"] .lg-chip{
      background: rgba(2,6,23,0.06) !important;
      border-color: rgba(15,23,42,0.10) !important;
      color: rgba(15,23,42,0.78) !important;
    }

    .hidden{ display:none !important; }
    .scroll-mt-24 { scroll-margin-top: 7rem; }

    /* Optional fallback progress bar */
    #scrollProgress{
      position: fixed; top: 0; left: 0; height: 3px; width: 0%;
      background: rgba(56,189,248,.85);
      z-index: 99999;
    }

    /* Inputs for calculator */
    .calc-input{
      width:100%;
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.92);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 12px;
      padding: 10px 12px;
      outline: none;
    }
    .calc-input:focus{
      border-color: rgba(255,255,255,0.20);
      box-shadow: 0 0 0 3px rgba(255,255,255,0.06);
    }
    [data-theme="light"] .calc-input{
      background: rgba(2,6,23,0.04) !important;
      color: rgba(15,23,42,0.92) !important;
      border-color: rgba(15,23,42,0.14) !important;
    }
    [data-theme="light"] .calc-input:focus{
      border-color: rgba(15,23,42,0.22) !important;
      box-shadow: 0 0 0 3px rgba(2,6,23,0.08) !important;
    }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
    }
    [data-theme="light"] .pill{
      border-color: rgba(15,23,42,0.12);
      background: rgba(2,6,23,0.04);
    }
  </style>
</head>

<body class="app">
  <!-- SVG Filter: “liquid / distortion” -->
  <svg class="svg-filters" width="0" height="0" aria-hidden="true" focusable="false">
    <filter id="glass-distortion">
      <feTurbulence type="fractalNoise" baseFrequency="0.012" numOctaves="2" seed="8" result="noise"/>
      <feDisplacementMap in="SourceGraphic" in2="noise" scale="14" xChannelSelector="R" yChannelSelector="G"/>
    </filter>
  </svg>

  <main class="page-wrap">
    <div class="max-w-5xl mx-auto p-5">

      <!-- Widgets (wie Index) -->
      <section class="liquid-glass lg-surface lg-radius-xl p-3 md:p-4 mb-6">
        <div class="flex flex-wrap items-center gap-2 md:gap-4">
          <div class="liquid-glass lg-chip lg-radius-md p-2.5 flex items-center gap-2.5">
            <div class="lg-icon"><i data-feather="calendar" class="w-4 h-4"></i></div>
            <div>
              <p class="lg-muted m-0">Date</p>
              <div class="font-extrabold" id="date">–</div>
            </div>
          </div>

          <div class="liquid-glass lg-chip lg-radius-md p-2.5 flex items-center gap-2.5">
            <div class="lg-icon"><i data-feather="clock" class="w-4 h-4"></i></div>
            <div>
              <p class="lg-muted m-0">Time</p>
              <div class="font-extrabold" id="time">–</div>
            </div>
          </div>

          <div class="lg-divider"></div>

          <div class="liquid-glass lg-chip lg-radius-md p-2.5 flex items-center gap-2.5">
            <div class="lg-icon"><i data-feather="cloud" class="w-4 h-4"></i></div>
            <div>
              <p class="lg-muted m-0">Weather · Bern</p>
              <div class="font-extrabold"><span id="wxText">–</span> · <span id="wxTemp">–°C</span></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Search (wie Index) -->
      <section class="liquid-glass lg-surface lg-radius-xl p-3 md:p-4 mb-6 sticky top-2 md:top-4 z-20">
        <div class="flex flex-wrap items-center gap-2 md:gap-4">
          <div class="relative flex-1 min-w-[220px]">
            <i data-feather="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-white/60 w-4 h-4"></i>
            <input id="q" type="search" placeholder="FelgenPRO durchsuchen..."
              class="w-full bg-white/5 text-white border border-white/10 rounded-lg pl-9 pr-3 py-2.5 focus:outline-none focus:border-white/20 focus:ring-1 focus:ring-white/10">
          </div>

          <div class="flex gap-2">
            <button id="viewCards" aria-pressed="true" class="lg-btn">
              <i data-feather="grid" class="w-4 h-4"></i><span>Karten</span>
            </button>
            <button id="viewList" aria-pressed="false" class="lg-btn">
              <i data-feather="list" class="w-4 h-4"></i><span>Liste</span>
            </button>
          </div>
        </div>
      </section>

      <!-- Overview -->
      <section id="overview" class="scroll-mt-24">
        <div class="flex items-center justify-between mb-4">
          <h1 class="text-2xl sm:text-3xl font-bold">FelgenPRO</h1>
          <span class="pill text-xs text-white/60">
            <i data-feather="award" class="w-4 h-4"></i>
            <span>Für 1.–2. Lehrjahr (Auto)</span>
          </span>
        </div>

        <div id="grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4">
          <article class="liquid-glass lg-card lg-radius-lg p-4 flex flex-col gap-2.5 group searchable" data-id="aufbau">
            <div class="flex items-center gap-2 text-white/70">
              <i data-feather="image" class="w-4 h-4"></i><span class="text-sm">Aufbau</span>
            </div>
            <h3 class="text-lg font-bold m-0">Aufbau & Bild</h3>
            <p class="text-white/75 m-0">Felgenaufbau schnell verstehen.</p>
            <a class="lg-open mt-auto" href="#aufbau">Öffnen <i data-feather="arrow-right" class="w-4 h-4"></i></a>
          </article>

          <article class="liquid-glass lg-card lg-radius-lg p-4 flex flex-col gap-2.5 group searchable" data-id="grundlagen">
            <div class="flex items-center gap-2 text-white/70">
              <i data-feather="layers" class="w-4 h-4"></i><span class="text-sm">Grundlagen</span>
            </div>
            <h3 class="text-lg font-bold m-0">Teile & Begriffe</h3>
            <p class="text-white/75 m-0">Hump, Tiefbett, Zentrierung.</p>
            <a class="lg-open mt-auto" href="#grundlagen">Öffnen <i data-feather="arrow-right" class="w-4 h-4"></i></a>
          </article>

          <article class="liquid-glass lg-card lg-radius-lg p-4 flex flex-col gap-2.5 group searchable" data-id="arten">
            <div class="flex items-center gap-2 text-white/70">
              <i data-feather="box" class="w-4 h-4"></i><span class="text-sm">Arten</span>
            </div>
            <h3 class="text-lg font-bold m-0">Stahl / Alu / Schmiede</h3>
            <p class="text-white/75 m-0">Vor- und Nachteile.</p>
            <a class="lg-open mt-auto" href="#arten">Öffnen <i data-feather="arrow-right" class="w-4 h-4"></i></a>
          </article>

          <article class="liquid-glass lg-card lg-radius-lg p-4 flex flex-col gap-2.5 group searchable" data-id="masse">
            <div class="flex items-center gap-2 text-white/70">
              <i data-feather="hash" class="w-4 h-4"></i><span class="text-sm">Maße</span>
            </div>
            <h3 class="text-lg font-bold m-0">ET / PCD / Nabe</h3>
            <p class="text-white/75 m-0">Codes lesen, Fehler vermeiden.</p>
            <a class="lg-open mt-auto" href="#masse">Öffnen <i data-feather="arrow-right" class="w-4 h-4"></i></a>
          </article>

          <article class="liquid-glass lg-card lg-radius-lg p-4 flex flex-col gap-2.5 group searchable" data-id="rechner">
            <div class="flex items-center gap-2 text-white/70">
              <i data-feather="cpu" class="w-4 h-4"></i><span class="text-sm">Werkstatt</span>
            </div>
            <h3 class="text-lg font-bold m-0">Drehmoment-Rechner</h3>
            <p class="text-white/75 m-0">Auswählen → Eingeben → Ergebnis live.</p>
            <a class="lg-open mt-auto" href="#rechner">Öffnen <i data-feather="arrow-right" class="w-4 h-4"></i></a>
          </article>

          <article class="liquid-glass lg-card lg-radius-lg p-4 flex flex-col gap-2.5 group searchable" data-id="hinweise">
            <div class="flex items-center gap-2 text-white/70">
              <i data-feather="check-circle" class="w-4 h-4"></i><span class="text-sm">Praxis</span>
            </div>
            <h3 class="text-lg font-bold m-0">Montage-Checkliste</h3>
            <p class="text-white/75 m-0">Kurz, klar, sicher.</p>
            <a class="lg-open mt-auto" href="#hinweise">Öffnen <i data-feather="arrow-right" class="w-4 h-4"></i></a>
          </article>
        </div>

        <div id="empty" class="opacity-75 text-center p-4 border border-dashed border-white/15 rounded-xl hidden" aria-live="polite">
          Keine Treffer
        </div>
      </section>

      <!-- ===== CONTENT ===== -->
      <section id="aufbau" class="mt-6 scroll-mt-24">
        <div class="liquid-glass lg-surface lg-radius-xl p-4 md:p-5">
          <h2 class="text-xl font-bold mb-2 flex items-center gap-2">
            <i data-feather="image" class="w-5 h-5 text-sky-300"></i><span>Felgen – Aufbau & Bild</span>
          </h2>
          <p class="text-white/70 text-sm mb-3">
            Das Bild hilft dir, die Begriffe weiter unten direkt zuzuordnen.
          </p>
          <img src="Bilder/FelgenInnen.jpg" alt="Felgenaufbau – Innenansicht" class="w-full max-w-full rounded-xl border border-white/10">
        </div>
      </section>

      <section id="grundlagen" class="mt-6 scroll-mt-24">
        <div class="liquid-glass lg-surface lg-radius-xl p-4 md:p-5">
          <h2 class="text-xl font-bold mb-3 flex items-center gap-2">
            <i data-feather="layers" class="w-5 h-5 text-emerald-300"></i><span>Wichtige Grundlagen</span>
          </h2>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Teile (kurz & praxisnah)</h3>
              <ul class="text-white/75 text-sm space-y-2">
                <li><b>Felgenhorn:</b> Außenkante. Dort sitzt die Reifenwulst.</li>
                <li><b>Hump (z. B. H2):</b> „Sicherheitswulst“, damit der Reifen bei Druckverlust weniger leicht abspringt.</li>
                <li><b>Tiefbett:</b> Vertiefung zum Montieren/Demontieren.</li>
                <li><b>Reifensitz:</b> Dichtfläche. Sauber & ohne Macken = dicht.</li>
                <li><b>Nabenbohrung (Zentrierung):</b> Felge sitzt mittig auf der Nabe (Zentrierring bei Zubehör).</li>
              </ul>
            </div>

            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Wichtig in der Werkstatt</h3>
              <ul class="text-white/75 text-sm space-y-2">
                <li><b>Radschraubensitz:</b> <b>Kegelbund</b> oder <b>Kugelbund</b> muss passen, sonst löst sich das Rad oder zieht schief.</li>
                <li><b>Hub-centric:</b> Zentrierung über Nabe/Bohrung ist stabiler als „nur über Schrauben“.</li>
                <li><b>Planlauf:</b> Rost/Schmutz an Nabe oder Felge = Unwucht/Schlag/Fehlzentrierung.</li>
                <li><b>Alu auf Stahl:</b> Kann „festbacken“ (Kontaktkorrosion). Sauber montieren, Vorgaben beachten.</li>
              </ul>
              <div class="mt-3 text-white/60 text-sm">
                Merksatz: <b>Sitz + Zentrierung + saubere Auflage</b> sind wichtiger als „sieht gut aus“.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="arten" class="mt-6 scroll-mt-24">
        <div class="liquid-glass lg-surface lg-radius-xl p-4 md:p-5">
          <h2 class="text-xl font-bold mb-3 flex items-center gap-2">
            <i data-feather="box" class="w-5 h-5 text-indigo-300"></i><span>Felgenarten</span>
          </h2>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-3">
            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Stahlfelgen</h3>
              <p class="text-white/75 text-sm m-0">Robust & günstig. Oft im Winter. Nachteil: eher schwer und rostanfällig.</p>
            </div>
            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Alufelgen (gegossen)</h3>
              <p class="text-white/75 text-sm m-0">Meist leichter als Stahl, bessere Optik, gute Wärmeabfuhr. Nachteil: empfindlicher gegen Bordstein.</p>
            </div>
            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Schmiedefelgen</h3>
              <p class="text-white/75 text-sm m-0">Sehr stabil bei geringem Gewicht. Teurer. Häufig Performance/Motorsport.</p>
            </div>
          </div>

          <div class="mt-3 liquid-glass lg-chip lg-radius-md p-3 text-white/75 text-sm">
            <b>Fachlich korrekt, aber simpel:</b> Weniger Gewicht am Rad (ungefederte Masse) hilft oft dem Fahrkomfort und der Radführung, aber „passt“ und „sicher montiert“ bleibt Nr. 1.
          </div>
        </div>
      </section>

      <section id="masse" class="mt-6 scroll-mt-24">
        <div class="liquid-glass lg-surface lg-radius-xl p-4 md:p-5">
          <h2 class="text-xl font-bold mb-2 flex items-center gap-2">
            <i data-feather="hash" class="w-5 h-5 text-sky-300"></i><span>Maße & Kennzeichnungen</span>
          </h2>

          <div class="liquid-glass lg-card lg-radius-lg p-4 mb-3">
            <div class="text-white/60 text-xs mb-1">Beispiel</div>
            <div class="text-white/85 font-semibold">7.5J × 17 H2 ET35 · 5×112 · 66.6</div>
            <div class="text-white/60 text-sm mt-2">
              Du musst nicht alles „auswendig können“. Du musst nur wissen, <b>was kritisch ist</b>: PCD/Lochkreis, Nabe, ET, Schraubensitz.
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Was bedeutet was?</h3>
              <ul class="text-white/75 text-sm space-y-2">
                <li><b>7.5J:</b> Felgenbreite (Zoll). „J“ = Kontur des Felgenhorns (PKW Standard).</li>
                <li><b>17:</b> Felgendurchmesser (Zoll).</li>
                <li><b>H2:</b> Doppelhump (besserer Wulstsitz).</li>
                <li><b>ET35:</b> Einpresstiefe 35 mm. Höhere ET = Rad steht „mehr innen“.</li>
                <li><b>5×112:</b> 5 Schrauben, Lochkreis 112 mm.</li>
                <li><b>66.6:</b> Nabenbohrung (mm). Zentriert die Felge.</li>
              </ul>
            </div>

            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Mini-Checks (Werkstatt)</h3>
              <ul class="text-white/75 text-sm space-y-2">
                <li><b>PCD stimmt?</b> Sonst geht’s gar nicht oder sitzt gefährlich.</li>
                <li><b>Nabenbohrung:</b> Zu klein = passt nicht. Zu groß = nur mit Zentrierringen sauber.</li>
                <li><b>ET/Freigängigkeit:</b> Prüfen: Bremse, Federbein, Radhaus, Lenkanschlag.</li>
                <li><b>Schraubensitz:</b> Kegel/Kugel muss passen (sonst lockert oder bricht).</li>
              </ul>
              <div class="mt-3 text-white/60 text-sm">
                Faustformel: Änderung Spur pro Achse ≈ <b>2×(ET-Änderung)</b>. (Nur als Gefühl, nicht als Freigabe.)
              </div>
            </div>
          </div>

          <div class="mt-3 liquid-glass lg-chip lg-radius-md p-3 text-white/75 text-sm">
            <b>Merke:</b> Falsche ET/PCD/Nabe ⇒ schleift, vibriert oder sitzt nicht richtig. Immer Vorgaben/Freigaben prüfen.
          </div>
        </div>
      </section>

      <section id="rechner" class="mt-6 scroll-mt-24">
        <div class="liquid-glass lg-surface lg-radius-xl p-4 md:p-5">
          <h2 class="text-xl font-bold mb-2 flex items-center gap-2">
            <i data-feather="cpu" class="w-5 h-5 text-emerald-300"></i><span>Drehmoment-Rechner</span>
          </h2>
          <p class="text-white/60 text-sm mb-4">
            Einfach: <b>Auswählen</b>, welche Größe du brauchst. Dann <b>2 Werte</b> eingeben. Ergebnis kommt live.
          </p>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <label class="text-white/70 text-xs">Ich will berechnen…</label>
              <select id="calcType" class="calc-input mt-1">
                <option value="M">Drehmoment M (M = F · r)</option>
                <option value="F">Kraft F (F = M / r)</option>
                <option value="r">Hebelarm r (r = M / F)</option>
                <option value="Fg">Kraft aus Masse (F = m · g)</option>
              </select>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3" id="fields"></div>

              <div class="mt-3 liquid-glass lg-chip lg-radius-md p-3">
                <div class="text-white/60 text-xs">Ergebnis</div>
                <div class="text-2xl font-extrabold" id="resMain">–</div>
                <div class="text-white/70 text-sm mt-1" id="resSub">–</div>
              </div>

              <div class="mt-3 text-white/60 text-sm" id="formula">–</div>

              <div class="mt-3 flex flex-wrap gap-2">
                <button id="resetCalc" class="lg-btn">
                  <i data-feather="rotate-ccw" class="w-4 h-4"></i><span>Reset</span>
                </button>
                <span class="pill text-xs text-white/60">
                  <i data-feather="tool" class="w-4 h-4"></i>
                  <span>Immer in SI: N, m, N·m</span>
                </span>
              </div>
            </div>

            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Wofür das in echt?</h3>
              <ul class="text-white/75 text-sm space-y-2">
                <li><b>Radschrauben:</b> Drehmoment sorgt für richtige Vorspannkraft. Zu wenig = locker, zu viel = Gewinde/Schraube überlastet.</li>
                <li><b>Drehmomentschlüssel:</b> Immer <b>Herstellerwert</b> verwenden. (Typische PKW liegen oft grob 90–140 N·m, aber das ist nur ein Gefühl, nicht „Regel“.)</li>
                <li><b>Hebelarm:</b> Längerer Hebel → gleiche Kraft erzeugt mehr Drehmoment.</li>
              </ul>

              <div class="mt-3 liquid-glass lg-chip lg-radius-md p-3 text-white/75 text-sm">
                <b>Mini-Tipp:</b> Wenn du ein Rad montierst: <b>handfest</b> → <b>kreuzweise</b> → Fahrzeug ablassen → <b>mit Drehmoment</b> kreuzweise nachziehen.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="hinweise" class="mt-6 scroll-mt-24">
        <div class="liquid-glass lg-surface lg-radius-xl p-4 md:p-5">
          <h2 class="text-xl font-bold mb-3 flex items-center gap-2">
            <i data-feather="check-circle" class="w-5 h-5 text-sky-300"></i><span>Praxis-Hinweise (kurz & wichtig)</span>
          </h2>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Montage-Checkliste</h3>
              <ul class="text-white/75 text-sm space-y-2">
                <li><b>Auflageflächen sauber:</b> Nabe/Felge frei von Rost, Schmutz, Farbe, Graten.</li>
                <li><b>Schrauben/Muttern korrekt:</b> Länge, Gewinde, <b>Kegel/Kugel-Sitz</b> passend.</li>
                <li><b>TPMS:</b> Sensor/ Ventil-Dichtung ok, danach ggf. anlernen.</li>
                <li><b>Kreuzweise anziehen:</b> Felge setzt sich gerade.</li>
                <li><b>Nachziehen:</b> Nach kurzer Fahrt gemäß Betrieb/Hersteller (wenn so vorgesehen).</li>
              </ul>
            </div>

            <div class="liquid-glass lg-card lg-radius-lg p-4">
              <h3 class="font-bold mb-2">Wann ist es „No-Go“?</h3>
              <ul class="text-white/75 text-sm space-y-2">
                <li><b>Risse / starke Deformation:</b> Felge nicht verwenden.</li>
                <li><b>Starker Höhenschlag/Seitenschlag:</b> Vibration, Unwucht, Sicherheitsrisiko.</li>
                <li><b>Falscher Lochkreis/Nabe:</b> Nicht „irgendwie“ montieren.</li>
                <li><b>Kontakt (schleifen):</b> Bremse/Federbein/Radhaus muss frei laufen.</li>
              </ul>

              <div class="mt-3 text-white/60 text-sm">
                Zubehörfelgen: nur mit Freigabe/ABE/ECE/Eintragung (je nach Land/Regelung).
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="text-white/60 text-xs text-center my-10">
        <div class="liquid-glass lg-chip lg-radius-pill inline-flex items-center gap-2 px-4 py-2">
          <span>© LearnCraft Pro</span>
          <span class="w-1 h-1 rounded-full bg-white/30"></span>
          <span>FelgenPRO</span>
        </div>
      </div>

    </div>
  </main>

  <!-- Bottom Bar: NUR 3 Buttons -->
  <nav id="bottomBar" class="liquid-glass bottom-bar lg-radius-pill" aria-label="Navigation">
    <a class="bar-item active" href="Index.html" aria-label="Home">
      <i data-feather="home" class="bar-icon"></i>
      <span class="bar-label">Home</span>
    </a>

    <a class="bar-item" href="#overview" data-target="overview" aria-label="Übersicht">
      <i data-feather="grid" class="bar-icon"></i>
      <span class="bar-label">Übersicht</span>
    </a>

    <button id="themeToggle" class="bar-item" type="button" aria-label="Theme wechseln">
      <i id="themeIcon" data-feather="sun" class="bar-icon"></i>
      <span class="bar-label">Theme</span>
    </button>
  </nav>

  <div id="scrollProgress"></div>

  <script>
    // Icons
    document.addEventListener('DOMContentLoaded', () => {
      if (window.feather) feather.replace();
    });

    // Theme
    (function themeInit(){
      const html = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const icon = document.getElementById('themeIcon');

      function applyTheme(mode){
        html.setAttribute('data-theme', mode);
        localStorage.setItem('theme', mode);
        if (icon) icon.setAttribute('data-feather', mode === 'dark' ? 'sun' : 'moon');
        if (window.feather) feather.replace();
      }
      applyTheme(localStorage.getItem('theme') || 'dark');
      btn?.addEventListener('click', () => {
        const current = html.getAttribute('data-theme') || 'dark';
        applyTheme(current === 'dark' ? 'light' : 'dark');
      });
    })();

    // Date/Time
    function updateDateTime() {
      const now = new Date();
      const d = document.getElementById('date');
      const t = document.getElementById('time');
      if (d) d.textContent = now.toLocaleDateString('de-CH', {weekday:'long', day:'numeric', month:'long', year:'numeric'});
      if (t) t.textContent = now.toLocaleTimeString('de-CH');
    }
    setInterval(updateDateTime, 1000);
    updateDateTime();

    // Weather (simple)
    async function fetchWeather(){
      try{
        const res = await fetch('https://wttr.in/Bern?format=%25C|%25t', {cache:'no-store'});
        const text = await res.text();
        const [c,temp] = (text||'').split('|');
        const wxT = document.getElementById('wxText');
        const wxTemp = document.getElementById('wxTemp');
        if (wxT) wxT.textContent = c || '–';
        if (wxTemp) wxTemp.textContent = (temp||'–').replace('+','');
      }catch(e){}
    }
    fetchWeather();

    // Smooth anchor scroll
    document.addEventListener('click', (e)=>{
      const a = e.target.closest('a[href^="#"]');
      if (!a) return;
      const id = a.getAttribute('href').slice(1);
      const el = document.getElementById(id);
      if (!el) return;
      e.preventDefault();
      el.scrollIntoView({behavior:'smooth', block:'start'});
    });

    // Search overview cards
    const searchInput = document.getElementById('q');
    const grid = document.getElementById('grid');
    const emptyState = document.getElementById('empty');
    const cards = grid ? [...grid.querySelectorAll('.searchable')] : [];

    function normalize(text) {
      return (text || '').toLowerCase().normalize('NFKD').replace(/[\u0300-\u036f]/g, '');
    }
    function performSearch() {
      const q = normalize((searchInput?.value || '').trim());
      let has = false;
      cards.forEach(card => {
        const text = normalize(card.innerText);
        const ok = !q || text.includes(q);
        card.style.display = ok ? 'flex' : 'none';
        if (ok) has = true;
      });
      if (emptyState) emptyState.style.display = has ? 'none' : 'block';
    }
    searchInput?.addEventListener('input', performSearch);

    // Cards vs List (only overview layout)
    const viewCardsBtn = document.getElementById('viewCards');
    const viewListBtn  = document.getElementById('viewList');

    function setView(isList){
      if (!grid) return;
      grid.classList.toggle('grid-cols-1', true);
      grid.classList.toggle('sm:grid-cols-2', !isList);
      grid.classList.toggle('lg:grid-cols-3', !isList);
      grid.classList.toggle('gap-1', isList);
      grid.classList.toggle('gap-4', !isList);
      viewCardsBtn?.setAttribute('aria-pressed', String(!isList));
      viewListBtn?.setAttribute('aria-pressed', String(isList));
    }
    viewCardsBtn?.addEventListener('click', () => setView(false));
    viewListBtn?.addEventListener('click', () => setView(true));

    // Bottom bar active state (Übersicht)
    (function barActive(){
      const overviewBtn = document.querySelector('#bottomBar a[data-target="overview"]');
      const overview = document.getElementById('overview');
      if (!overviewBtn || !overview) return;

      const obs = new IntersectionObserver((entries)=>{
        const v = entries[0];
        overviewBtn.classList.toggle('active', !!v?.isIntersecting);
      }, { rootMargin: '-40% 0px -55% 0px', threshold: 0.08 });

      obs.observe(overview);
    })();

    // Scroll progress
    (function(){
      const progress = document.getElementById('scrollProgress');
      const onScroll = () => {
        const h = document.documentElement;
        const denom = (h.scrollHeight - h.clientHeight) || 1;
        progress.style.width = (h.scrollTop / denom * 100).toFixed(2) + '%';
      };
      document.addEventListener('scroll', onScroll, {passive:true});
      onScroll();
    })();

    /* ===== Drehmoment-Rechner: Dropdown → 2 Inputs → Ergebnis live ===== */
    (() => {
      const typeEl = document.getElementById("calcType");
      const fieldsEl = document.getElementById("fields");
      const resMain = document.getElementById("resMain");
      const resSub  = document.getElementById("resSub");
      const formula = document.getElementById("formula");
      const resetBtn = document.getElementById("resetCalc");

      const fmt = (n, d=2) => (Number.isFinite(n) ? n.toFixed(d).replace('.', ',') : "–");
      const num = (v) => {
        const x = parseFloat(String(v ?? '').replace(',', '.'));
        return Number.isFinite(x) ? x : NaN;
      };

      const CONFIG = {
        M: {
          title: "Drehmoment M",
          f: "M = F · r",
          fields: [
            { id:"F", label:"Kraft F (N)", step:"1", value:"400" },
            { id:"r", label:"Hebelarm r (m)", step:"0.001", value:"0.30" }
          ],
          compute: (v) => {
            const F = num(v.F), r = num(v.r);
            if(!(F>0 && r>0)) return null;
            const M = F*r;
            return { main: `${fmt(M,2)} N·m`, sub: `F=${fmt(F,0)} N · r=${fmt(r,3)} m` };
          }
        },
        F: {
          title: "Kraft F",
          f: "F = M / r",
          fields: [
            { id:"M", label:"Drehmoment M (N·m)", step:"0.1", value:"120" },
            { id:"r", label:"Hebelarm r (m)", step:"0.001", value:"0.30" }
          ],
          compute: (v) => {
            const M = num(v.M), r = num(v.r);
            if(!(M>0 && r>0)) return null;
            const F = M/r;
            return { main: `${fmt(F,2)} N`, sub: `≈ ${fmt(F/9.81,1)} kg (Gewichtskraft grob)` };
          }
        },
        r: {
          title: "Hebelarm r",
          f: "r = M / F",
          fields: [
            { id:"M", label:"Drehmoment M (N·m)", step:"0.1", value:"120" },
            { id:"F", label:"Kraft F (N)", step:"1", value:"400" }
          ],
          compute: (v) => {
            const M = num(v.M), F = num(v.F);
            if(!(M>0 && F>0)) return null;
            const r = M/F;
            return { main: `${fmt(r,3)} m`, sub: `M=${fmt(M,1)} N·m · F=${fmt(F,0)} N` };
          }
        },
        Fg: {
          title: "Kraft aus Masse",
          f: "F = m · g",
          fields: [
            { id:"m", label:"Masse m (kg)", step:"0.1", value:"25" },
            { id:"g", label:"g (m/s²)", step:"0.01", value:"9.81" }
          ],
          compute: (v) => {
            const m = num(v.m), g = num(v.g);
            if(!(m>0 && g>0)) return null;
            const F = m*g;
            return { main: `${fmt(F,2)} N`, sub: `m=${fmt(m,1)} kg · g=${fmt(g,2)} m/s²` };
          }
        }
      };

      function render(){
        const key = typeEl.value;
        const cfg = CONFIG[key];
        formula.textContent = `${cfg.title}: ${cfg.f}`;

        fieldsEl.innerHTML = "";
        cfg.fields.forEach(f => {
          const wrap = document.createElement("div");
          wrap.className = "flex flex-col gap-1";

          const lab = document.createElement("label");
          lab.className = "text-white/70 text-xs";
          lab.textContent = f.label;

          const input = document.createElement("input");
          input.className = "calc-input";
          input.type = "number";
          input.step = f.step || "any";
          input.value = f.value ?? "";
          input.id = "f_" + f.id;
          input.inputMode = "decimal";

          input.addEventListener("input", run);

          wrap.appendChild(lab);
          wrap.appendChild(input);
          fieldsEl.appendChild(wrap);
        });

        run();
      }

      function getVals(){
        const key = typeEl.value;
        const cfg = CONFIG[key];
        const v = {};
        cfg.fields.forEach(f => v[f.id] = document.getElementById("f_"+f.id)?.value);
        return v;
      }

      function run(){
        const key = typeEl.value;
        const cfg = CONFIG[key];
        const r = cfg.compute(getVals());
        if(!r){
          resMain.textContent = "–";
          resSub.textContent = "Bitte gültige, positive Werte eingeben.";
          return;
        }
        resMain.textContent = r.main;
        resSub.textContent  = r.sub;
      }

      typeEl.addEventListener("change", render);
      resetBtn.addEventListener("click", () => render());
      render();
    })();
  </script>
</body>
</html>
